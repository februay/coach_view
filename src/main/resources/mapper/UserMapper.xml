<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="indi.xp.coachview.mapper.UserMapper">

    <resultMap id="userResultMap"
        type="indi.xp.coachview.model.User">
        <id column="uid" property="uid" />
        <result column="user_name" property="userName" />
        <result column="user_email" property="userEmail" />
        <result column="user_password" property="userPassword" />
        <result column="name" property="name" />
        <result column="phone" property="phone" />
        <result column="company" property="company" />
        <result column="department" property="department" />
        <result column="title" property="title" />
        <result column="status" property="status" />
        <result column="active_time" property="activeTime" />
        <result column="create_time" property="createTime" />
        <result column="delete_status" property="deleteStatus" />
    </resultMap>

    <sql id="common_where">
        where delete_status = 0
    </sql>

    <sql id="uid_in">
        <if test="uidList != null and uidList.size() > 0">
            and user.uid in
            <foreach collection="uidList" item="uid" open="("
                separator="," close=")">
                #{uid}
            </foreach>
        </if>
    </sql>

    <select id="getUserByUid" parameterType="java.lang.String"
        resultMap="userResultMap">
        select *
        from user
        <include refid="common_where" />
        and uid = #{uid}
    </select>

    <select id="getUserByPhone" parameterType="java.lang.String"
        resultMap="userResultMap">
        select *
        from user
        <include refid="common_where" />
        and phone = #{phone}
    </select>

    <select id="findUserListByUidList"
        parameterType="java.util.List" resultMap="userResultMap">
        select *
        from user
        <include refid="common_where" />
        <include refid="uid_in" />
    </select>

    <select id="findUserList" parameterType="java.util.List"
        resultMap="userResultMap">
        select *
        from user
        <include refid="common_where" />
    </select>

</mapper>